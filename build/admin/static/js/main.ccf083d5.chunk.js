(this.webpackJsonpadmin=this.webpackJsonpadmin||[]).push([[0],{26:function(e,t,a){e.exports=a(41)},32:function(e,t,a){},40:function(e,t,a){},41:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),l=a(24),o=a.n(l),r=(a(31),a(32),a(2)),i=a(15),s=a(3),m=a(11),d=a(4);var u=function(e){var t=Object(n.useState)({username:"",password:""}),a=Object(r.a)(t,2),l=a[0],o=a[1],i=Object(n.useState)(!1),u=Object(r.a)(i,2),f=u[0],p=u[1],E=!0===f?c.a.createElement("div",{className:"alert alert-danger"},"Invalid Credentials"):"";function v(e){o(Object(d.a)(Object(d.a)({},l),{},Object(m.a)({},e.target.name,e.target.value)))}return!0===e.loggedIn?c.a.createElement(s.a,{to:"/admin"}):c.a.createElement("div",{style:{height:"100%"},className:"container-fluid d-flex align-items-center justify-content-center"},c.a.createElement("div",{className:"row"},c.a.createElement("form",{method:"GET",action:"/api/auth/login"},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-md-12"},c.a.createElement("div",{className:"form-group"},c.a.createElement("input",{type:"text",name:"username",value:l.username,onChange:v,placeholder:"Enter username",className:"form-control"})))),c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-md-12"},c.a.createElement("div",{className:"form-group"},c.a.createElement("input",{type:"password",name:"password",value:l.password,onChange:v,placeholder:"Enter password",className:"form-control"})))),c.a.createElement("div",{className:"row d-flex justify-content-center"},c.a.createElement("div",{className:"form-group"},c.a.createElement("button",{type:"submit",onClick:function(t){t.preventDefault(),fetch("/api/auth/login",{method:"POST",body:JSON.stringify(l),headers:{"Content-Type":"application/json"}}).then((function(e){return 200===e.status?e.text():new Promise((function(e){e(!1)}))})).then((function(t){!1===t?p(!0):e.notifyLoginState(!0,t)})).catch((function(e){console.log(e)}))},className:"btn btn-primary"},"Login"))),E)))},f=a(8),p=a(9);var E=function(e){return c.a.createElement("div",{className:"col-md-11"},c.a.createElement("div",{className:"float-right"},c.a.createElement("button",{className:"btn btn-primary default",onClick:function(){fetch("/api/auth/logout").then((function(t){t.status&&e.logout()}))}},"Logout")))},v=function(e){return c.a.createElement("div",{className:"col-md-1"},c.a.createElement(f.a,{onClick:function(){e.notify(!e.addViewState)},icon:p.c,style:{color:"MediumSeaGreen"},className:"default pointer",size:"2x"}))};var g=function(e){return c.a.createElement("div",{className:"row d-flex align-items-center pt-1"},c.a.createElement(v,{notify:e.notify,addViewState:e.addViewState}),c.a.createElement(E,{logout:e.logout}))},b=a(17);var N=function(){return c.a.createElement("div",{style:{position:"absolute",backgroundColor:"rgb(255, 255, 255, 0.5)",width:"100%",height:"100%",zIndex:1,display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column"}},c.a.createElement(f.a,{icon:p.a,style:{color:"DodgerBlue"},className:"default fa-spin",size:"2x"}))},h={AddInProgress:1,AddCompleted:2,FetchingData:3,DataFetchedSuccessfully:4,EditInProgress:5,DeleteInProgress:6,EditCompleted:7,DeleteCompleted:8};var O=function(e){var t=Object(n.useState)({title:"",link:"",topics:[]}),a=Object(r.a)(t,2),l=a[0],o=a[1],i=Object(n.useState)(!1),s=Object(r.a)(i,2),u=s[0],E=s[1],v=Object(n.useState)(!0),g=Object(r.a)(v,2),O=g[0],j=g[1],y=Object(n.useState)({title:!0}),S=Object(r.a)(y,2),w=S[0],T=S[1],C=Object(n.useState)(!1),k=Object(r.a)(C,2),I=k[0],x=k[1],D={title:"Title is Required"},P={title:function(e){return""===e?(D.title="Title is required",!1):(D.title="",!0)}},L=function(e){var t=function(e){var t=Object(n.useState)(""),a=Object(r.a)(t,2),l=a[0],o=a[1],i=Object(n.useState)(!1),s=Object(r.a)(i,2),m=s[0],d=s[1];return c.a.createElement("div",{className:"row pl-1 pr-1"},c.a.createElement("div",{className:"col-md"},c.a.createElement("label",null,"Topics:"),c.a.createElement("div",{className:"form-group form-inline"},c.a.createElement("input",{type:"text",name:"topics",value:l,onChange:function(e){o(e.target.value)},placeholder:"Enter topics",className:"form-control"}),c.a.createElement(f.a,{onClick:function(){""!==l?(d(!1),e.addTopic(l)):d(!0)},icon:p.c,style:{color:"DodgerBlue"},size:"2x",className:"default pointer"}),m?c.a.createElement("div",{className:"alert alert-danger"},"Empty Topic"):"")))},a=function(e){return c.a.createElement("div",{className:"topic-container"},e.topics.map((function(t,a){return c.a.createElement("div",{className:"topic",key:a},c.a.createElement("span",{className:"default"},t),c.a.createElement(f.a,{icon:p.d,onClick:function(){e.deleteTopic(a)},className:"default"}))})))};return c.a.createElement("div",{style:{width:"100%"}},c.a.createElement(t,{addTopic:e.addTopic}),c.a.createElement(a,{topics:e.topics,deleteTopic:e.deleteTopic}))};function J(e){o(Object(d.a)(Object(d.a)({},l),{},Object(m.a)({},e.target.name,e.target.value)))}return!0===e.active?c.a.createElement("div",{className:"add"},u?c.a.createElement(N,null):"",c.a.createElement("form",{method:"POST",action:"/resource"},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-md-6"},c.a.createElement("div",{className:"form-group"},c.a.createElement("label",null,"Title:"),c.a.createElement("input",{type:"text",name:"title",value:l.title,onChange:J,placeholder:"Enter title",className:"form-control"}),O||w.title?"":c.a.createElement("div",{className:"alert alert-danger default"},D.title))),c.a.createElement("div",{className:"col-md-6"},c.a.createElement("div",{className:"form-group"},c.a.createElement("label",null,"Link:"),c.a.createElement("input",{type:"text",name:"link",value:l.link,onChange:J,placeholder:"Enter link",className:"form-control"})))),c.a.createElement(L,{topics:l.topics,addTopic:function(e){var t=Object(b.a)(l.topics);t.push(e),o(Object(d.a)(Object(d.a)({},l),{},{topics:t}))},deleteTopic:function(e){var t=[];l.topics.forEach((function(a,n){n!==e&&t.push(a)})),o(Object(d.a)(Object(d.a)({},l),{},{topics:t}))}}),c.a.createElement("div",{className:"row pl-1 pr-1"},c.a.createElement("div",{className:"col-md-2"},c.a.createElement("div",{className:"form-group"},c.a.createElement("button",{type:"submit",onClick:function(t){t.preventDefault(),function(){var e=!0,t={};for(var a in P){var n=P[a](l[a]);t[a]=n,!1===n&&(e=!1)}return T(t),j(e),e}()&&(E(!0),fetch("/api/resource",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)}).then((function(t){200===t.status&&(x(!0),E(!1),setTimeout((function(){x(!1)}),5e3),e.notify(h.AddCompleted))})))},className:"btn btn-success",disabled:u},"Save")))),I?c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"alert alert-success alert-dismissible ml-3"},c.a.createElement("a",{href:"#",className:"close","data-dismiss":"alert","aria-label":"close"},"\xd7"),"Resource Added Successfully")):"")):""};var j=function(e){var t=Object(n.useState)(!1),a=Object(r.a)(t,2),l=a[0],o=a[1];function i(t){switch(t){case h.EditInProgress:case h.DeleteInProgress:o(!0);break;case h.EditCompleted:case h.DeleteCompleted:e.notify(t);break;default:o(!1)}}function s(e){var t=Object(n.useState)("view"),a=Object(r.a)(t,2),l=a[0],o=a[1],i=Object(n.useState)({}),s=Object(r.a)(i,2),u=s[0],E=s[1],v=Object(n.useState)({}),g=Object(r.a)(v,2),N=g[0],O=g[1];function j(e){"edit"===e?(O(u),o("edit")):"view"===e&&(E(N),o("view"))}function y(e){return c.a.createElement("li",{className:"resource-container",key:e.data.id},c.a.createElement(f.a,{onClick:function(){e.handleEdit("edit")},icon:p.b,className:"default resource-edit"}),c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-md-1"},c.a.createElement("strong",null,"Title:")),c.a.createElement("div",{className:"col-md-10"},c.a.createElement("p",null,e.data.title))),c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-md-1"},c.a.createElement("strong",null,"Link:")),c.a.createElement("div",{className:"col-md-10"},c.a.createElement("p",null,e.data.link))),c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-md-1"},c.a.createElement("strong",null,"Topics: ")),c.a.createElement("div",{className:"col-md-10"},c.a.createElement("div",{className:"topic-container"},e.data.topics?e.data.topics.map((function(e,t){return c.a.createElement("div",{className:"topic",key:t},c.a.createElement("span",{className:"default"},e))})):""))))}function S(e){var t=function(e){var t=function(e){var t=Object(n.useState)(""),a=Object(r.a)(t,2),l=a[0],o=a[1],i=Object(n.useState)(!1),s=Object(r.a)(i,2),m=s[0],d=s[1];return c.a.createElement("div",{className:"row p-1"},c.a.createElement("div",{className:"col-md-1"},c.a.createElement("strong",null,"Topics:")),c.a.createElement("div",{className:"col-md-10"},c.a.createElement("div",{className:"form-group form-inline"},c.a.createElement("label",null),c.a.createElement("input",{type:"text",name:"topics",value:l,onChange:function(e){o(e.target.value)},placeholder:"Enter topics",className:"form-control"}),c.a.createElement(f.a,{onClick:function(){""!==l?(d(!1),e.addTopic(l)):d(!0)},icon:p.c,style:{color:"DodgerBlue"},size:"2x",className:"default pointer"}),m?c.a.createElement("div",{className:"alert alert-danger default"},"Empty Topic"):"")))},a=function(e){return c.a.createElement("div",{className:"topic-container"},e.topics.map((function(t,a){return c.a.createElement("div",{className:"topic",key:a},c.a.createElement("span",{className:"default"},t),c.a.createElement(f.a,{icon:p.d,onClick:function(){e.deleteTopic(a)},className:"default"}))})))};return c.a.createElement("div",null,c.a.createElement(t,{addTopic:e.addTopic}),c.a.createElement(a,{topics:e.topics,deleteTopic:e.deleteTopic}))},a=Object(n.useState)({}),l=Object(r.a)(a,2),o=l[0],i=l[1];function s(e){i(Object(d.a)(Object(d.a)({},o),{},Object(m.a)({},e.target.name,e.target.value)))}return Object(n.useEffect)((function(){i(e.data)}),[e.data]),c.a.createElement("li",{className:"resource-container"},c.a.createElement("div",{className:"row p-1"},c.a.createElement("div",{className:"col-md-1"},c.a.createElement("strong",null,"Title: ")),c.a.createElement("div",{className:"col-md-10"},c.a.createElement("input",{type:"text",name:"title",value:o.title,onChange:s,placeholder:"Enter title",className:"form-control"}))),c.a.createElement("div",{className:"row p-1"},c.a.createElement("div",{className:"col-md-1"},c.a.createElement("strong",null,"Link: ")),c.a.createElement("div",{className:"col-md-10"},c.a.createElement("input",{type:"text",name:"link",value:o.link,onChange:s,placeholder:"Enter title",className:"form-control"}))),o.topics?c.a.createElement(t,{topics:o.topics,addTopic:function(e){var t=Object(b.a)(o.topics);t.push(e),i(Object(d.a)(Object(d.a)({},o),{},{topics:t}))},deleteTopic:function(e){var t=[];o.topics.forEach((function(a,n){n!==e&&t.push(a)})),i(Object(d.a)(Object(d.a)({},o),{},{topics:t}))}}):"",c.a.createElement("div",{className:"row p-1"},c.a.createElement("div",{className:"col-md-3 d-flex align-items-center"},c.a.createElement("button",{type:"button",onClick:function(){e.notify(h.EditInProgress),fetch("/api/resource/"+o.id,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)}).then((function(t){200===t.status&&e.notify(h.EditCompleted)}))},className:"btn btn-success m-1"},"Save"),c.a.createElement("button",{type:"button",onClick:function(){return e.handleEdit("view")},className:"btn btn-danger m-1"},"Cancel"),c.a.createElement(f.a,{icon:p.e,onClick:function(){console.log("t"),e.notify(h.DeleteInProgress),fetch("/api/resource/"+o.id,{method:"DELETE"}).then((function(t){200===t.status&&e.notify(h.DeleteCompleted)}))},className:"default",size:"2x",style:{color:"Crimson",cursor:"pointer"}}))))}return Object(n.useEffect)((function(){E(e.data)}),[e.data]),"view"===l?c.a.createElement(y,{data:u,handleEdit:j}):c.a.createElement(S,{data:u,handleEdit:j,handleChange:function(e){E(Object(d.a)(Object(d.a)({},u),{},Object(m.a)({},e.target.name,e.target.value)))},notify:e.notify})}return Object(n.useEffect)((function(){e.actionInProgress===h.FetchingData?o(!0):o(!1)}),[e.actionInProgress]),c.a.createElement("div",{style:{position:"relative",height:"100%"}},l?c.a.createElement(N,null):"",c.a.createElement("ul",{style:{width:"100%",listStyleType:"none"},className:"resourcelist"},e.resources.map((function(e){return c.a.createElement(s,{key:e.id,data:e,notify:i})}))))};var y=function(e){var t=Object(n.useState)([]),a=Object(r.a)(t,2),l=a[0],o=a[1],i=Object(n.useState)(!1),m=Object(r.a)(i,2),d=m[0],u=m[1],f=Object(n.useState)(null),p=Object(r.a)(f,2),E=p[0],v=p[1];function b(e){switch(e){case h.AddCompleted:case h.EditCompleted:case h.DeleteCompleted:N()}}var N=function(){v(h.FetchingData),fetch("/api/resources",{method:"GET"}).then((function(e){if(200===e.status)return e.json()})).then((function(e){o(e),v(null)}))};return Object(n.useEffect)((function(){N()}),[]),!0===e.loggedIn?c.a.createElement("div",{className:"container-fluid",style:{height:"100%"}},c.a.createElement(g,{logout:function(){localStorage.removeItem("loggedIn"),e.notifyLoginState(!1,0)},notify:function(e){u(e)},addViewState:d}),c.a.createElement(O,{notify:b,active:d}),c.a.createElement(j,{resources:l,notify:b,actionInProgress:E})):c.a.createElement(s.a,{to:"/admin/login"})};a(40);var S=function(){var e=Object(n.useState)(JSON.parse(localStorage.getItem("session"))),t=Object(r.a)(e,2),a=t[0],l=t[1];function o(e,t){var a={loggedIn:e,expireTime:t};localStorage.setItem("session",JSON.stringify(a)),l(a)}return Object(n.useEffect)((function(){var e=localStorage.getItem("session"),t=new Date;if(null===e||e.expireTime<=t.getTime()){localStorage.setItem("session",JSON.stringify({loggedIn:!1,expireTime:0}))}}),[]),c.a.createElement(i.a,null,c.a.createElement("div",{style:{height:"100%"}},c.a.createElement(s.d,null,c.a.createElement(s.b,{path:"/admin/login"},c.a.createElement(u,{loggedIn:!!a&&a.loggedIn,notifyLoginState:o})),c.a.createElement(s.b,{path:"/admin"},c.a.createElement(y,{loggedIn:!!a&&a.loggedIn,notifyLoginState:o})))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(S,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[26,1,2]]]);
//# sourceMappingURL=main.ccf083d5.chunk.js.map